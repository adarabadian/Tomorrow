{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adara\\\\Desktop\\\\aaa\\\\Tomorrow\\\\frontend\\\\src\\\\components\\\\AlertList\\\\AlertList.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Typography, Grid, Box, CircularProgress, Alert as MuiAlert } from '@mui/material';\nimport AlertCard from '../AlertCard/AlertCard';\nimport DeleteAlertDialog from '../DeleteAlertDialog/DeleteAlertDialog';\nimport { updateAlertLastRead } from '../../services/alertService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AlertList = ({\n  alerts,\n  loading,\n  error,\n  onDelete,\n  onEdit,\n  onRefresh\n}) => {\n  _s();\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [selectedAlertId, setSelectedAlertId] = useState(null);\n  const [deleteInProgress, setDeleteInProgress] = useState(false);\n  const handleDeleteClick = alertId => {\n    setSelectedAlertId(alertId);\n    setDeleteDialogOpen(true);\n  };\n  const handleDeleteConfirm = async () => {\n    if (!selectedAlertId) return;\n    setDeleteInProgress(true);\n    try {\n      await onDelete(selectedAlertId);\n    } catch (err) {\n      console.error('Error deleting alert:', err);\n    } finally {\n      setDeleteInProgress(false);\n      setDeleteDialogOpen(false);\n      setSelectedAlertId(null);\n    }\n  };\n  const handleDeleteCancel = () => {\n    setDeleteDialogOpen(false);\n    setSelectedAlertId(null);\n  };\n\n  // Handle edit click and track when an alert was viewed\n  const handleEditClick = async id => {\n    try {\n      // Update the lastRead timestamp\n      await updateAlertLastRead(id);\n\n      // Call the parent component's edit handler\n      if (onEdit) {\n        await onEdit(id);\n      }\n    } catch (error) {\n      console.error('Error handling edit click:', error);\n      // Continue with edit even if update lastRead fails\n      if (onEdit) {\n        await onEdit(id);\n      }\n    }\n  };\n\n  // Loading state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      my: 4,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        size: 60,\n        thickness: 4\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Error state\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(MuiAlert, {\n      severity: \"error\",\n      sx: {\n        my: 2\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Empty state\n  if (alerts.length === 0) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      my: 4,\n      p: 3,\n      border: 1,\n      borderColor: \"divider\",\n      borderRadius: 1,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        align: \"center\",\n        gutterBottom: true,\n        children: \"No Alerts Yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        align: \"center\",\n        color: \"textSecondary\",\n        children: \"Create your first weather alert using the form above.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Display alerts\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      children: [\"Your Alerts (\", alerts.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: alerts.map(alert => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 6,\n        lg: 4,\n        children: /*#__PURE__*/_jsxDEV(AlertCard, {\n          alert: alert,\n          onDelete: () => handleDeleteClick(alert.id || alert._id),\n          onEdit: onEdit ? () => onEdit(alert.id || alert._id) : undefined\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this)\n      }, alert.id || alert._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteAlertDialog, {\n      open: deleteDialogOpen,\n      loading: deleteInProgress,\n      onConfirm: handleDeleteConfirm,\n      onClose: handleDeleteCancel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(AlertList, \"LuBcqX+4jiOHAnHFiO22nuaBxn4=\");\n_c = AlertList;\nexport default AlertList;\nvar _c;\n$RefreshReg$(_c, \"AlertList\");","map":{"version":3,"names":["React","useState","Typography","Grid","Box","CircularProgress","Alert","MuiAlert","AlertCard","DeleteAlertDialog","updateAlertLastRead","jsxDEV","_jsxDEV","Fragment","_Fragment","AlertList","alerts","loading","error","onDelete","onEdit","onRefresh","_s","deleteDialogOpen","setDeleteDialogOpen","selectedAlertId","setSelectedAlertId","deleteInProgress","setDeleteInProgress","handleDeleteClick","alertId","handleDeleteConfirm","err","console","handleDeleteCancel","handleEditClick","id","display","justifyContent","alignItems","my","children","size","thickness","fileName","_jsxFileName","lineNumber","columnNumber","severity","sx","length","flexDirection","p","border","borderColor","borderRadius","variant","align","gutterBottom","color","container","spacing","map","alert","item","xs","md","lg","_id","undefined","open","onConfirm","onClose","_c","$RefreshReg$"],"sources":["C:/Users/adara/Desktop/aaa/Tomorrow/frontend/src/components/AlertList/AlertList.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { \r\n  Typography, \r\n  Grid, \r\n  Box, \r\n  CircularProgress, \r\n  Alert as MuiAlert\r\n} from '@mui/material';\r\nimport AlertCard from '../AlertCard/AlertCard';\r\nimport DeleteAlertDialog from '../DeleteAlertDialog/DeleteAlertDialog';\r\nimport { Alert } from '../../types/alert';\r\nimport { updateAlertLastRead } from '../../services/alertService';\r\n\r\ninterface AlertListProps {\r\n  alerts: Alert[];\r\n  loading: boolean;\r\n  error: string | null;\r\n  onDelete: (id: string) => Promise<void>;\r\n  onEdit?: (id: string) => Promise<void>;\r\n  onRefresh?: () => void;\r\n}\r\n\r\nconst AlertList: React.FC<AlertListProps> = ({ \r\n  alerts, \r\n  loading, \r\n  error, \r\n  onDelete,\r\n  onEdit,\r\n  onRefresh\r\n}) => {\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [selectedAlertId, setSelectedAlertId] = useState<string | null>(null);\r\n  const [deleteInProgress, setDeleteInProgress] = useState(false);\r\n\r\n  const handleDeleteClick = (alertId: string) => {\r\n    setSelectedAlertId(alertId);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!selectedAlertId) return;\r\n    \r\n    setDeleteInProgress(true);\r\n    try {\r\n      await onDelete(selectedAlertId);\r\n    } catch (err) {\r\n      console.error('Error deleting alert:', err);\r\n    } finally {\r\n      setDeleteInProgress(false);\r\n      setDeleteDialogOpen(false);\r\n      setSelectedAlertId(null);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteDialogOpen(false);\r\n    setSelectedAlertId(null);\r\n  };\r\n\r\n  // Handle edit click and track when an alert was viewed\r\n  const handleEditClick = async (id: string) => {\r\n    try {\r\n      // Update the lastRead timestamp\r\n      await updateAlertLastRead(id);\r\n      \r\n      // Call the parent component's edit handler\r\n      if (onEdit) {\r\n        await onEdit(id);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error handling edit click:', error);\r\n      // Continue with edit even if update lastRead fails\r\n      if (onEdit) {\r\n        await onEdit(id);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <Box \r\n        display=\"flex\" \r\n        justifyContent=\"center\" \r\n        alignItems=\"center\" \r\n        my={4}\r\n      >\r\n        <CircularProgress size={60} thickness={4} />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error) {\r\n    return (\r\n      <MuiAlert \r\n        severity=\"error\" \r\n        sx={{ my: 2 }}\r\n      >\r\n        {error}\r\n      </MuiAlert>\r\n    );\r\n  }\r\n\r\n  // Empty state\r\n  if (alerts.length === 0) {\r\n    return (\r\n      <Box \r\n        display=\"flex\" \r\n        flexDirection=\"column\" \r\n        alignItems=\"center\" \r\n        my={4}\r\n        p={3}\r\n        border={1}\r\n        borderColor=\"divider\"\r\n        borderRadius={1}\r\n      >\r\n        <Typography variant=\"h6\" align=\"center\" gutterBottom>\r\n          No Alerts Yet\r\n        </Typography>\r\n        <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\r\n          Create your first weather alert using the form above.\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  // Display alerts\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Your Alerts ({alerts.length})\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        {alerts.map(alert => (\r\n          <Grid item xs={12} md={6} lg={4} key={alert.id || alert._id}>\r\n            <AlertCard \r\n              alert={alert} \r\n              onDelete={() => handleDeleteClick(alert.id || alert._id)}\r\n              onEdit={onEdit ? () => onEdit(alert.id || alert._id) : undefined}\r\n            />\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n\r\n      <DeleteAlertDialog\r\n        open={deleteDialogOpen}\r\n        loading={deleteInProgress}\r\n        onConfirm={handleDeleteConfirm}\r\n        onClose={handleDeleteCancel}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AlertList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}